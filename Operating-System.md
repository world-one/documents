## 운영체제
- 운영체제는 사용자가 컴퓨터를 쉽게 다루게 해주는 인터페이스입니다.
- 한정된 메모리나 시스템 자원을 효율적으로 분배합니다.
- 운영체제와 유사하지만 소프트웨어를 추가로 설치할 수 없는 것을 펌웨어라고 합니다.

### 운영체제의 역할
- CPU 스케줄링과 프로세스 관리
- 메모리 관리
- 디스크 파일 관리
- I/O 디바이스 관리

### 운영체제의 구조
- 유저 프로그램
1. GUI
   - CUI만 있는 리눅스 서버
2. 시스템콜
   - 운영체제가 커널에 접근하기 위한 인터페이스
     - 유저 프로그램이 운영체제의 서비스를 받기 위해 커널 함수를 호출할 때 사용합니다. 
     - I/O 요청 -> 유저 모드가 시스템콜을 통해 커널 모드로 변환되어 실행됩니다.
     - 유저프로그램 -> fs.readFile() -> 유저 모드 -> 커널 모드 -> 파일 시스템 -> 유저 모드
     - 컴퓨터 자원에 대한 직접 접근을 차단하고 다른 프로그램으로부터 보호합니다.
   - 프로세스나 스레드에서 운영체제로 요청을 할 때 시스템콜이라는 인터페이스와 커널을 거쳐 운영체제에 전달됩니다.
   - modebit
     - 시스템콜이 작동될 때 modebit를 통해 유저 모드와 커널 모드를 구분합니다.
3. 커널
4. 드라이버
- 하드웨어

### 컴퓨터의 요소
- CPU
  - Central Processing Unit은 산술논리연산장치, 제어장치, 레지스터로 구성되어 있는 컴퓨터 장치입니다.
  - 인터럽트에 의해 단순히 메모리에 존재하는 명령어를 해석해서 실행하는 일꾼입니다.
  - 제어장치: 프로세스 조작을 지시하는 CPU의 부품입니다.
  - 레지스터: CPU 안에 있는 매우 빠른 임시기억장치입니다.
  - 산술논리연산장치: 두 숫자의 산술 연산과 배타적 논리합, 논리곱 같은 논리 연산을 계산하는 디지털 회로입니다.
  - CPU의 연산 처리
    1. 제어장치가 메모리와 레지스터에 계산할 값을 로드합니다.
    2. 제어장치가 레지스터에 있는 값의 계산을 위해 산술논리연산장치에 명령합니다.
    3. 제어장치가 계산된 값을 레지스터에서 메모리로 저장합니다.
  - 인터럽트: 어떤 신호가 들어왔을 때 CPU를 잠깐 정지시키는 것을 말합니다.
    - 하드웨어 인터럽트
    - 소프트웨어 인터럽트
- DMA 컨트롤러
  - I/O 디바이스가 메모리에 직접 접근할 수 있도록 하는 하드웨어 장치를 말합니다.
  - CPU 부하를 막아줍니다.
- 메모리
  - 전자회로에서 데이터나 상태, 명령어 등을 기록하는 장치를 말합니다.
  - RAM
  - CPU는 계산을 담당하고, 메모리는 기억을 담당합니다.
- 타이머
  - 작업이 시간을 정하고 특정 프로그램에 시간 제한을 합니다.
- 디바이스 컨트롤러
  - 컴퓨터와 연결되어 있는 IO 디바이스들의 작은 CPU를 말합니다.
  
### 메모리
#### 메모리 게층
- 레지스터: CPU 안의 작은 메모리, 휘발성, 속도 빠름, 용량 적음
- 캐시: L1, L2 캐시, 휘발성, 속도 빠름, 용량 적음
  - 데이터를 미리 복사해두는 임시 저장소, 장치 사이의 속도 차이에 따른 병목 현상을 줄이기 위한 메모리입니다.
- 주기억장치(RAM): 휘발성, 속도 보통, 용량 보통
  - 하드디스크로부터 일정량의 데이터를 복사해서 임시 저장하고 필요 시 CPU에 빠르게 전달합니다.
- 보조기억장치(HDD/SSD): 휘발성, 속도 낮음, 용량 많음

#### 캐시히트, 캐시미스
- 캐시에서 원하는 데이터를 찾는 것을 캐시히트라고 합니다.
- 캐시에 없을 경우 주 메모리로 가서 데이터를 찾아오는 것을 캐시미스라고 합니다.
- 캐시매핑: 캐시가 히트되기 위해 매핑하는 방법을 말합니다.
  - 직접 매핑
  - 연관 매핑
  - 집합 연관 매핑

#### 웹 브라우저에서의 캐시
- 쿠키
- 로컬 스토리지
- 세션 스토리지


### 메모리 관리
#### 가상 메모리
- 컴퓨터가 실제로 이용 가능한 메모리 자원을 추상화화여 사용자들에게 매우 큰 메모리로 보이게 만드는 것을 말합니다.
- 가상 주소와 실제 메모리상에 있는 실제 주소가 있습니다.
- 가상 주소는 메모리관리장치(MMU)에 의해 실제 주소로 변환됩니다.
- 가상 메모리는 가상 주소와 실제 주소가 매핑되어 있고 프로세스의 주소 정보가 들어 있는 페이지 테이블로 관리됩니다.
  - 속도 향상을 위해 TLB를 사용합니다.
    - TLB: 메모리와 CPU 사이에 있는 주소 변환을 위한 캐시
- 스와핑
- 페이지폴트: 프로세스의 주소 공간에는 존재하지만 RAM에는 없는 데이터에 접근했을 때 발생합니다.

#### 스레싱
- thrashing은 메모리의 페이지 폴트율이 높은 것을 의미합니다. 이는 심각한 성능저하를 초래합니다.
- 메모리에 너무 많은 프로세스가 동시에 올라가고, 이 때문에 스와핑이 많이 발생합니다.
- 페이지 폴트가 일어나면 CPU 이용율이 낮아지고 운영체제는 가용성을 높이기 위해 많은 프로세스를 메모리에 올립니다. 악순환이 반복되어 스레싱이 발생합니다.
- 해결 방법으로는 메모리를 늘리거나, SDD로 바꿀 수 있습니다.
  - 작업 세트: 프로세스의 과거 사용 이력인 지역성을 통해 결정된 페이지 집합을 만들어 미리 메모리에 로드하는 것
  - PFF: 페이지 폴트 빈도를 조절하는 방법, 상한선과 하한선을 만든다.

#### 메모리 할당
- 연속 할당
- 불연속 할당

#### 페이지 교체 알고리즘
- 한정된 메모리안에서 스와핑이 많이 일어나지 않도록 페이지 교체 알고리즘을 기반으로 설계됩니다.
- 오프라인 알고리즘
- FIFO: 가장 먼저 온 페이지를 교체 영역에 놓는 방법
- LRU(Least Recently Used): 참조가 가장 왜된 페이지를 교체
- NUR(Not Used Recently)
- LFU(Least Frequently Used)

### 프로세스, 스레드
- 프로세스는 컴퓨터에서 실행되고 있는 프로그램을 말합니다.
- 스레드는 프로세스 내 작업의 흐름을 말합니다.
- 프로그램이 메모리에 올라가면 프로세스가 되는 인스턴스화가 일어납니다. 이후 운영체제의 CPU 스케줄러에 따라 프로세스를 실행합니다.

#### 프로세스와 컴파일
1. 전처리
2. 컴파일러
3. 어셈블러
4. 링커