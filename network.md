### 네트워크의 구조
- 두 대이상의 컴퓨터 간의 네트워크
- 데이터 전송, 웹 사이트 열람, 메일 송수신 등
- 인터넷: 전 세계의 큰 네트워크부터 작은 네트워크까지 연결하는 거대한 네트워크
- 패킷(Packet): 네트워크를 통해 전송되는 데이터의 작은 조각
    - 큰 데이터를 그대로 보내면 네트워크 대역폭을 너무 많이 차지해서 다른 패킷의 흐름을 막는다.
    - 패킷은 순서 없이 도착한다. 그래서 송신측에서 번호를 붙이고 수신측에서 정렬한다.
### bit, byte
- bit: 0, 1의 정보를 나타내는 최소 단위
- 1byte == 8bit
- 문자코드
    - 숫자와 문자의 대응표
    - ASCII(American Standard Code for Information Interchange)
        - 알파벳, 기호, 숫자 등을 다루는 기본적인 문자코드
### LAN, WAN
- LAN (Local Area Network), 근거리 통신망
    - 가정이나 빌딩 등 지리적으로 제한된 곳에서 연결된 네트워크
    - 빠르고, 오류가 적다.
- WAN (Wide Area Network), 광역 통신망
    - 지리적으로 넓은 범위에 구축된 네트워크
    - 느리고, 오류가 많다.
    - ISP (Internet Service Provider), 인터넷 서비스 제공자
        - KT, U+, SK 브로드밴드 등 
- 인터넷의 시작
    - 1969년 12월 미국 국방의 ARPA에서 군사 목적으로 컴퓨터 4대를 연결

### 소규모 회사의 네트워크 구성
    - DMZ (DeMilitarized Zone) 네트워크 영역
        - 외부에 공개하기 위한 네트워크
        - 웹 서버, 메일 서버, DNS
    - 온프레미스(on-premise)
        - 사내, 데이터 센터에 서버를 두고 운영하는 것
    - 서버장비실에 랙을 두고 랙안에 서버와 라우터, 스위치를 설치한다. 각 서버는 스위치와 연결하여 서로 통신할 수 있다.

### 네트워크 규칙
    - 프로토콜: 통신하기 위한 규칙

### OSI 모델, TCP/IP 모델
- 통신 규격
- 국제표준화기구 ISO(International Organization for Standardization)
    - OSI 모델이라는 표준 규격을 제정
#### OSI 모델
- 7계층
    - 응용 계층(Application Layer)
    - 이메일 & 파일 전송, 웹 사이트 조회
- 6계층
    - 표현 계층(Presentation Layer)
    - 문자 코드, 압축, 암호화 등의 데이터 변환
- 5계층
    - 세션 계층(Session Layer)
    - 세션 체결, 통신방식 결정
- 4계층
    - 전송 계층(Transport Layer)
    - 신뢰할 수 있는 통신 구현
- 3계층
    - 네트워크 계층(Network Layer)
    - 다른 네트워크와 통신하기 위한 경로 설정 및 논리 주소 결정
- 2계층
    - 데이터 링크 계층(Data Link Layer)
    - 네트워크 기기 간의 데이터 전송 및 물리 주소 결정
- 1계층
    - 물리 계층(Physical Layer)
    - 시스템 간의 물리적인 연결과 전기 신호를 변환 및 제어

#### TCP/IP 모델
- 4계층
    - 응용 계층(Application Layer)
- 3계층
    - 전송 계층(Transport Layer)
- 2계층
    - 인터넷 계층(Internet Layer)
- 1계층
    - 네트워크 접속 계층(Network Access Layer)
    - Host-to-Network

### 캡슐화와 역캡슐화
- 데이터를 보낼 때 그 앞부분에 전송하는데 필요한 정보를 붙여서 다음 계층으로 보낸다. 이를 헤더라고 한다.
- 헤더에는 데이터를 전달받을 상대방에 대한 정보도 포함되어 있다.
- 헤더는 붙여나가는 것을 캡슐화라고 하며, 받는 쪽에서 헤더를 제거하는 것을 역캡슐화라고 한다.
- VPN(Virtual Private Network): 가상 사설망
    - 인터넷 VPN
    - IP-VPN

#### 흐름
1. 응용계층(7계층)에서는 웹 사이트를 접속하기 위한 요청 데이터 생성
2. 전송계층(4계층)으로 전달되었을 때, 신뢰할 수 잇는 통신이 되도록 헤더를 붙인다.
3. 네트워크계층(3계층)에서는 다른 네트워크와 통신하기 위해 헤더를 붙인다.
4. 물리적인 통신 채널을 연결하기 위해 데이터링크계층(2계층)에서 헤더와 트레일러를 붙인다.
- 트레일러: 데이터의 마지막에 추가하는 정보
5. 최종적으로 전기 신호로 변환되어 수신 측에 도착

### 물리 계층의 역할과 랜 카드의 구조
- 0,1로 이루어진 비트열을 전기 신호로 변환하기 위해서는 물리 계층의 기술이 필요
- 아날로그 신호: 물결 모양의 전기 신호, 전화 또는 라디오 방송에 사용
- 디지털 신호: 막대 모양
- 랜 카드: 0,1의 정보를 전기 신호로 변환

### 케이블
- 전송 매체: 데이터가 흐르는 물리적인 선로, 유선과 무선이 있다.
    - 유선: 트위스트 페어 케이블, 광케이블
    - 무선: 라디오파, 마이크로파, 적외선
- 트위스트 페어 케이블(랜 케이블)
    - UTP 케이블(비차폐 연선): 구리 선 여덟개를 두개씩 꼬아 만든 네쌍의 전선
        - 실드로 보호되지 않아서 노이즈의 영향을 받기 쉬우나 저렴하다.
    - STP 케이블(차폐 연선): 두 개씩 꼬아 만든 선을 실드로 보호한 케이블
        - 실드로 보호되지만 비싸다.
- 노이즈는 전기 신호가 흐를 때 발생한다. 그래서 영향을 적게 받도록 구리 선 두개를 비틀어 꼬아서 케이블을 만든다.
- 케이블이 양쪽에는 RJ-45라고 부르는 커넥터를 붙인다. 랜포트나 네트워크 기기에 연결
- 다이렉트 케이블: 컴퓨터와 스위치를 연결할 때 사용
- 크로스 케이블: 컴퓨터 간에 직접 랜 케이블로 연결할 때 사용
    - 실제로는 1, 2, 3, 6번 구리 선을 사용
    - 데이터 전송시 충돌을 막기 위해 전선을 교차

### 리피터, 허브
#### 리피터(repeater)
- 전기 신호를 정형(일그러진 전기 신호를 복원)하고 증폭하는 기능을 가진 네트워크 중계 장비
    - 멀리 있는 상대방과도 통신할 수 있도록 파형을 정상으로 만든다.
    - 다른 네트워크 장비가 이 기능을 지원하기 때문에 보기 힘들다.
#### 허브(hub)
- 포트를 여러 개 가지고 있다.
- 리피터 허브라고도 부른다.
- 리피터와 마찬가지로 전기 신호를 정형하고 증폭하는 기능을 한다.
- 컴퓨터 여러 대를 서로 연결하는 장치
- 각 포트에 연결된 모든 컴퓨터에 데이터가 전송된다. 허브는 스스로 판단하지 않고 모든 포트로 보내서 더미 허브라고 불리기도 한다. 이를 위해 나온 게 스위치라는 네트워크 장비다.

### 이더넷
- 데이터 링크 계층은 OSI 모델에서 두 번째 계층으로 네트워크 장비 간에 신호를 주고받는 규칙을 정한다.
    - 랜에서 데이터를 정상적으로 주고받기 위해 필요한 계층으로 그 규칙 중 일반적으로 가장 많이 사용되는 것이 이더넷이다.
- 허브는 관계 없는 다른 컴퓨터들에게도 데이터가 전송된다.
    - 그 내용을 보지 못하게 하기 위해 목적지 정보를 추가해서 보내고 그 외의 컴퓨터는 데이터를 받더라도 무시한다.
    - 이더넷은 여러 컴퓨터가 동시에 데이터를 보내더라도 충돌이 일어나지 않는 구조로 되어 있다.
        - CSMA/CD(반송파 감지 다중 접속 및 충돌 탐지): 데이터를 보내는 시점을 늦춘다.
            - 케이블에 데이터가 흐루고 있는지 확인 후 대기 또는 전송한다.
            - 하지만 효율이 좋지 않다는 이유로 거의 사용하지 않는다.

### MAC Address
- Media Access Control Address(물리 주소)
- 랜 카드에는 제조할 때 새겨지는 물리 주소가 있으며 전 세계에서 유일한 번호로 할당된다.
- 48비트 숫자로 구성
    - 앞쪽 24비트는 제조사 번호, 뒤쪽 24비트는 일련번호

#### 이더넷 헤더
- OSI 모델의 데이터 링크 계층, TCP/IP모델의 네트워크 계층에서는 이더넷 헤더와 트레일러를 붙인다.
- 헤더
    1. 목적지 MAC 주소(6바이트)
    2. 출발지 MAC 주소(6바이트)
    3. 유형(2바이트)
        - 이더넷으로 전송되는 상위 계층 프로토콜의 종류, 프로토콜을 식별하는 16진수
            - 0800, IPv4
            - 0806, ARP
            - 8035, RARP
            - 814C, SNMP over Ethernet
            - 86DD, IPv6
- 트레일러
    - FCS(Frame Check Sequence)
    - 데이터 전송 도중에 오류가 발생하는지 확인하는 용도
- 이더넷 헤더와 트레일러가 추가된 데이터를 프레임이라고 한다.

### 스위치
- 데이터 링크 계층에서 동작, 레이어2 스위치 또는 스위칭 허브라고 불린다.
- MAC 주소 테이블: 스위치 내부에 있음, 스위치의 포트 번호와 해당 포트에 연결된 컴퓨터의 MAC 주소가 등록되는 데이터베이스
- MAC 주소 학습 기능: 출발지 MAC 주소가 등록되어 있지 않을 경우 MAC 주소를 포트와 함께 등록
- 플러딩(flooding): 전송시 아직 목적지의 MAC 주소가 테이블에 등록되어 있지 않을 경우 나머지 포트에도 전송되는 현상

### 전이중 통신, 반이중 통신
#### 전이중 통신
- 데이터의 송수신을 동시에 통신하는 방식
- 데이터를 동시에 전송해도 충돌이 일어나지 않음
- 스위치

#### 반이중 통신
- 회선 하나로 송신과 수신을 번갈아가면서 통신하는 방식
- 데이터를 동시에 전송하면 충돌 발생
- 컴퓨터를 허브로 연결하면 회선 하나를 송신과 수신이 번갈아가면서 사용

#### 충돌 도메인
- 반이중 통신 방식에서 동시에 데이터를 전송하면 충돌이 발생할 때 그 영향이 미치는 범위
- 허브의 경우에는 연결되어 있는 컴퓨터 전체가 충돌 도메인
- 스위치는 충돌이 일어나지 않으며, 충돌 도메인의 범위가 좁다.
- 범위가 넓을수록 네트워크 지연

#### ARP
- Address Resolution Protocol
- 목적지 컴퓨터의 IP 주소를 이용하여 MAC 주소를 찾기 위한 프로토콜

### 이더넷 규격
- 10BASE5
    - 하이픈 없을 경우 케이블의 최대 길이, 5는 500미터
- 10BASE2
- 10BASE-T
- 100BASE-TX
- 1000BASE-T
- 10GBASE-T
- 10: 통신속도, BASE: 전송 방식, -T: 케이블

### 네트워크 간의 연결 구조
- 다른 네트워크에 있는 목적지로 데이터를 전달하기 위해서는 네트워크 계층의 기술이 필요하다.
- 데이터 링크 계층에서 이더넷 규칙을 기반으로 한 데이터의 전송은 같은 네트워크에 있는 컴퓨터로만 데이터를 전송할 수 있다.
- 라우터: 네트워크 계층을 통해 다른 네트워크로 데이터를 전송하기 위한 장비
    - 해당 목적지까지 어떤 경로로 가는 것이 좋은지를 알려준다.
- 네트워크에서 데이터를 보내려면 목적지 주소가 있어야한다. 네트워크를 식별할 수 있는 주소가 IP
    - IP 주소는 어떤 네트워크의 어떤 컴퓨터인지 구분
- 라우팅: 목적지 IP 주소까지 어떤 경로로 데이터를 보낼지 결정하는 것
- 라이팅 테이블: 경로 정보를 등록하고 관리한다.
- IP(Internet Protocol)
    - 네트워크 계층의 프로토콜
    - 네트워크 계층에서 캡슐화 할 때 IP 헤더를 붙인다.
        - version
        - header length
        - service type
        - total length(전체 패킷 길이)
        - ID
        - flags(조각 상태)
        - fragment offset(조각의 위치)
        - TTL
        - protocol
        - header checksum
        - source IP address(출발지 IP 주소)
        - destination IP address(목적지 IP 주소)
- IP 패킷: IP 헤더가 추가된 데이터 캡슐

### IP 주소의 구조
- IP 주소는 인터넷 서비스 제공자(ISP)에게 받을 수 있다.
- IPv4
    - 32비트, 약 43억개 만들 수 있다.
- IPv6
    - 128비트, 인터넷이 보급되면서 IPv4 주소가 부족해지면서 나옴
    - 약 340간, 340조의 1조 배의 1조 배
- 공인 IP는 ISP가 제공하며, 인터넷에 직접 연결되는 컴퓨터나 라우터에 할당
- 사설 IP는 회사나 가정의 랜에 연결된 컴퓨터에 할당
- DHCP(Dynamic Host Configuration Protocol)
    - 공인 IP는 라우터에만 할당
    - 라우터의 DHCP 기능을 사용하여 랜의 컴퓨터에게 주소를 자동으로 할당
- 주소는 2진수의 32비트를 사용
    - MAC address는 48비트, 16진수로 표시
    - IP address는 32비트, 10진수로 표시
    - 11000000 10101000 00000001 00001010 (2진수)
        - 192.168.1.10
        - 8비트를 옥텟(octet)이라고 부르기도 한다.
        - 0부터 255까지
- IP 주소는 네트워크 ID와 호스트 ID로 나뉜다.

### IP Address Class
- 클래스: 네트워크 크기를 구분하는 개념
- 네트워크 ID + 호스트 ID
- A 클래스
    - 8비트 + 24비트
    - 1.0.0.0 ~ 127.255.255.255
        - 사설 IP: 10.0.0.0 ~ 10.255.255.255
- B 클래스
    - 16비트 + 16비트
    - 128.0.0.0 ~ 191.255.255.255
        - 사설 IP: 172.16.0.0 ~ 172.31.255.255
- C 클래스
    - 24비트 + 8비트
    - 192.0.0.0 ~ 223.255.255.255
        - 사설 IP: 192.168.0.0 ~ 192.168.255.255

### 네트워크 주소, 브로드캐스트 주소
- 특별한 주소, 컴퓨터나 라우터가 IP로 사용하면 안되는 주소
    - 네트워크 주소: 192.168.1.0
        - 호스트 ID가 0이면 전체 네트워크의 대표 주소
        - 192.168.1.1 ~ 192.168.1.6 은 위 네트워크에 있다.
    - 브로드 캐스트 주소: 192.168.0.255
        - 호스트 ID가 255
        - 네트워크에 있는 컴퓨터나 장비 모두에게 한번에 데이터를 전송하는 전용 IP

### 서브넷
- 대규모 네트워크를 작은 네트워크로 분할하여 브로드캐스트 전송 패킷의 범위를 좁힐 수 있다.
- 서브넷팅: 네트워크를 분할하는 것
- 서브넷팅 후 네트워크 ID + 호스트 ID
    - 네트워크 ID + 서브넷 ID + 호스트 ID로 바뀐다.
    - 호스트 ID로 사용되던 비트를 서브넷 ID로 변경
- 서브넷 마스트
    - 네트워크 ID와 호스트 ID를 식별하기 위한 값
    - 프리픽스 표기법: 서브넷 마스크를 /비트 수로 나타낸 것
        - 255.255.255.0 -> /24
        - 255.255.255.240 -> /28

### 라우터
- 네트워크를 분리할 수 있다.
- 스위치만 있는 네트워크는 모든 컴퓨터와 스위치가 동일 네트워크에 속하게 된다.
- 기본 게이트웨이: 라우터로 분리된 네트워크끼리 데이터를 전송하려면 설정해야하는 네트워크의 출입구로 라우터의 IP 주소를 설정해야한다.
- 라우팅 기능
    - 경로 정보를 기반으로 현재의 네트워크에서 다른 네트워크로 최적의 경로를 통해 데이터 전송
    - 라우팅 테이블: 경로 정보가 등록되어 있는 테이블
        - 수동, 자동 등록
        - 자동으로 등록하는 방법은 라우터 간에 경로 정보를 서로 교환하여 자동으로 수정
        - 라우팅 프로토콜: 라우터 간에 라우팅 정보를 교환하기 위한 프로토콜
            - RIP, OSPF, BGP

### 전송 계층
- 목적지에 신뢰할 수 있는 데이터를 전달
    - 오류를 점검하는 기능이 있다.
    - 전송된 데이터의 목적지가 어떤 애플리케이션인지 식별하는 기능도 있다.
- 신뢰성/정확성, 효율성
    - 연결형 통신: 신뢰할 수 있고 정확한 데이터를 전달
        - 상대방과 확인하며 통신
        - TCP
    - 비연결형 통신: 효율적으로 데이터를 전달
        - 상대방을 확인하지 않고 일방적으로 데이터를 전송
        - 동영상 스트리밍
        - UDP
